/* ==UserStyle==
@name           Dark-Telegram
@namespace      github.com/Barina/Dark-Telegram
@homepageURL    https://github.com/Barina/Dark-Telegram
@supportURL     https://github.com/Barina/Dark-Telegram/issues
@updateURL      https://raw.githubusercontent.com/Barina/Dark-Telegram/master/Dark-Telegram.styl
@version        1.0.0
@description    Customizable theme for telegram web.
@author         Roy Barina
@license        MIT
@preprocessor   stylus

@var color text                 'Text color' #ccccca

@var color msg-in-bg            'Incoming message background color'  #3c434f
@var color msg-out-bg           'Outgoing message background color' #333a47
@var range msgb                 'Messages bubble corner size' [10, 1, 100, 1, "px"]

@var color bgcolor              'Background color' #1f232a

@var color border               'Border color' #333943
@var range border-size          'Border size' [3, 0, 50, 1, "px"]

@var color control              'Base control color' #252A33
@var color control-hover        'Control hover color' #292f38
@var color control-active       'Control active color' #343b46

@var color inputbg              'Input background color' #1c2026

@var color shadow               'Shadow color' #00000040

@var color  btn-bg              'Buttons color' #2b313b
@var color  btn-bg-h            'Hover buttons color' #363d4a

@var color accent               'Accent color' #7289da

@var range round                'User photo round' [25, 0, 50, 1, "%"]

@var text     bg_image          'Custom background image link' url('https://media.discordapp.net/attachments/310799529161129984/417408747812552715/zilesanamin.jpg')
@var text     chatbg2           'Custom image for chat' url('https://i.imgur.com/AzleJ7c.png')

@var checkbox showchatbg        'Enable chat background image' 1
@var text     chatbg            'Custom image for chat' url('https://web.whatsapp.com/img/bg-chat-tile_9e8a2898faedb7db9bf5638405cf81ae.png')
@var range    chatbg-o          'Chat background image opacity' [0.15, 0.0, 1, 0.01]
@var range    chatbg-i          'Chat background image inverted colors' [0.6, 0.0, 1, 0.1]

@var select   app_image         'Custom app background' {
    'Default background           *': 'default ',
    'None                          ': 'none    ',
}
@var text bgimage               'Custom background image' url('https://images.unsplash.com/photo-1434569117012-ce134ee1a088?fit=crop&w=1280&h=720&q=80')
@var range bgopacity            'Background image opacity' [0.4, 0.0, 1, 0.01]
@var range bgblur               'Background image blur size' [12, 0, 50, 1, 'px']
@var range bghue                'Background image hue' [320, 0, 360, 1, 'deg']
@var range bginvert             'Background image invert colors' [0, 0.0, 1, 0.1]

@var checkbox tail              'Messages tail' 1
@var checkbox vign              'Vignette effect on photos' 1
@var checkbox emoj-shift        'Shift emoji popup to the left' 0
@var checkbox private           'Enable private mode' 0
@var checkbox shift-anim        'Enable contacts shift animation on mouse hover' 1

@var checkbox hideinitials      'Hide contact initials' 1
@var checkbox useicons          'Enable custom contact icons' 1

@var text contacticon           'Contact icon url' url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmOCI/Pg0KPHN2ZyB4bWxucz0iaHR0cDov%0D%0AL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMTIgMjEyIiB3aWR0aD0iMjEyIiBo%0D%0AZWlnaHQ9IjIxMiI+DQogICAgPHBhdGggZmlsbD0iIzFmMjMyYSIgY2xhc3M9ImJhY2tncm91bmQi%0D%0AIGQ9Ik0xMDYuMjUxLjVDMTY0LjY1My41IDIxMiA0Ny44NDYgMjEyIDEwNi4yNVMxNjQuNjUzIDIx%0D%0AMiAxMDYuMjUgMjEyQzQ3Ljg0NiAyMTIgLjUgMTY0LjY1NC41IDEwNi4yNVM0Ny44NDYuNSAxMDYu%0D%0AMjUxLjV6Ii8+DQogICAgPHBhdGggZmlsbD0iI2ExYTFhMSIgY2xhc3M9InByaW1hcnkiIGQ9Ik0x%0D%0ANzMuNTYxIDE3MS42MTVhNjIuNzY3IDYyLjc2NyAwIDAgMC0yLjA2NS0yLjk1NSA2Ny43IDY3Ljcg%0D%0AMCAwIDAtMi42MDgtMy4yOTkgNzAuMTEyIDcwLjExMiAwIDAgMC0zLjE4NC0zLjUyNyA3MS4wOTcg%0D%0ANzEuMDk3IDAgMCAwLTUuOTI0LTUuNDcgNzIuNDU4IDcyLjQ1OCAwIDAgMC0xMC4yMDQtNy4wMjYg%0D%0ANzUuMiA3NS4yIDAgMCAwLTUuOTgtMy4wNTVjLS4wNjItLjAyOC0uMTE4LS4wNTktLjE4LS4wODct%0D%0AOS43OTItNC40NC0yMi4xMDYtNy41MjktMzcuNDE2LTcuNTI5cy0yNy42MjQgMy4wODktMzcuNDE2%0D%0AIDcuNTI5Yy0uMzM4LjE1My0uNjUzLjMxOC0uOTg1LjQ3NGE3NS4zNyA3NS4zNyAwIDAgMC02LjIy%0D%0AOSAzLjI5OCA3Mi41ODkgNzIuNTg5IDAgMCAwLTkuMTUgNi4zOTUgNzEuMjQzIDcxLjI0MyAwIDAg%0D%0AMC01LjkyNCA1LjQ3IDcwLjA2NCA3MC4wNjQgMCAwIDAtMy4xODQgMy41MjcgNjcuMTQyIDY3LjE0%0D%0AMiAwIDAgMC0yLjYwOSAzLjI5OSA2My4yOTIgNjMuMjkyIDAgMCAwLTIuMDY1IDIuOTU1IDU2LjMz%0D%0AIDU2LjMzIDAgMCAwLTEuNDQ3IDIuMzI0Yy0uMDMzLjA1Ni0uMDczLjExOS0uMTA0LjE3NGE0Ny45%0D%0AMiA0Ny45MiAwIDAgMC0xLjA3IDEuOTI2Yy0uNTU5IDEuMDY4LS44MTggMS42NzgtLjgxOCAxLjY3%0D%0AOHYuMzk4YzE4LjI4NSAxNy45MjcgNDMuMzIyIDI4Ljk4NSA3MC45NDUgMjguOTg1IDI3LjY3OCAw%0D%0AIDUyLjc2MS0xMS4xMDMgNzEuMDU1LTI5LjA5NXYtLjI4OXMtLjYxOS0xLjQ1LTEuOTkyLTMuNzc4%0D%0AYTU4LjM0NiA1OC4zNDYgMCAwIDAtMS40NDYtMi4zMjJ6TTEwNi4wMDIgMTI1LjVjMi42NDUgMCA1%0D%0ALjIxMi0uMjUzIDcuNjgtLjczN2EzOC4yNzIgMzguMjcyIDAgMCAwIDMuNjI0LS44OTYgMzcuMTI0%0D%0AIDM3LjEyNCAwIDAgMCA1LjEyLTEuOTU4IDM2LjMwNyAzNi4zMDcgMCAwIDAgNi4xNS0zLjY3IDM1%0D%0ALjkyMyAzNS45MjMgMCAwIDAgOS40ODktMTAuNDggMzYuNTU4IDM2LjU1OCAwIDAgMCAyLjQyMi00%0D%0ALjg0IDM3LjA1MSAzNy4wNTEgMCAwIDAgMS43MTYtNS4yNWMuMjk5LTEuMjA4LjU0Mi0yLjQ0My43%0D%0AMjUtMy43MDEuMjc1LTEuODg3LjQxNy0zLjgyNy40MTctNS44MTFzLS4xNDItMy45MjUtLjQxNy01%0D%0ALjgxMWEzOC43MzQgMzguNzM0IDAgMCAwLTEuMjE1LTUuNDk0IDM2LjY4IDM2LjY4IDAgMCAwLTMu%0D%0ANjQ4LTguMjk4IDM1LjkyMyAzNS45MjMgMCAwIDAtOS40ODktMTAuNDggMzYuMzQ3IDM2LjM0NyAw%0D%0AIDAgMC02LjE1LTMuNjcgMzcuMTI0IDM3LjEyNCAwIDAgMC01LjEyLTEuOTU4IDM3LjY3IDM3LjY3%0D%0AIDAgMCAwLTMuNjI0LS44OTYgMzkuODc1IDM5Ljg3NSAwIDAgMC03LjY4LS43MzdjLTIxLjE2MiAw%0D%0ALTM3LjM0NSAxNi4xODMtMzcuMzQ1IDM3LjM0NSAwIDIxLjE1OSAxNi4xODMgMzcuMzQyIDM3LjM0%0D%0ANSAzNy4zNDJ6Ii8+DQo8L3N2Zz4=")

@var text groupicon             'Group icon url' url("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmOCI/Pg0KPHN2ZyB4bWxucz0iaHR0cDov%0D%0AL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMTIgMjEyIiB3aWR0aD0iMjEyIiBo%0D%0AZWlnaHQ9IjIxMiI+DQogICAgPHBhdGggZmlsbD0iIzFmMjMyYSIgY2xhc3M9ImJhY2tncm91bmQi%0D%0AIGQ9Ik0xMDUuOTQ2LjI1QzE2NC4zMTguMjUgMjExLjY0IDQ3LjU5NiAyMTEuNjQgMTA2cy00Ny4z%0D%0AMjIgMTA1Ljc1LTEwNS42OTUgMTA1Ljc1QzQ3LjU3MSAyMTEuNzUuMjUgMTY0LjQwNC4yNSAxMDZT%0D%0ANDcuNTcxLjI1IDEwNS45NDYuMjV6Ii8+DQogICAgPHBhdGggZmlsbD0iI2ExYTFhMSIgY2xhc3M9%0D%0AInByaW1hcnkiIGQ9Ik02MS41NDMgMTAwLjk4OGM4LjA3MyAwIDE0LjI0Ni02LjE3NCAxNC4yNDYt%0D%0AMTQuMjQ2cy02LjE3My0xNC4yNDYtMTQuMjQ2LTE0LjI0Ni0xNC4yNDYgNi4xNzMtMTQuMjQ2IDE0%0D%0ALjI0NiA2LjE3NCAxNC4yNDYgMTQuMjQ2IDE0LjI0NnptOC4xNTkgMTcuNTQxYTQ4LjE5MiA0OC4x%0D%0AOTIgMCAwIDEgOC41NDUtNi4wNjJjLTQuMTc0LTIuMjE3LTkuNjQxLTMuODU5LTE2LjcwNC0zLjg1%0D%0AOS0yMS44NDQgMC0yOC40OTIgMTUuNjctMjguNDkyIDE1LjY3djguMDczaDI2LjE4MWwuMTA1LS4y%0D%0ANDhjLjMwMy0uNzEzIDMuMTY0LTcuMTUxIDEwLjM2NS0xMy41NzR6bTgwLjc1NS05LjkyMWMtNi44%0D%0ANTQgMC0xMi4yMSAxLjU0My0xNi4zMzYgMy42NjFhNDguMjIzIDQ4LjIyMyAwIDAgMSA4LjkwMyA2%0D%0ALjI2YzcuMjAxIDYuNDIyIDEwLjA2MSAxMi44NjEgMTAuMzY0IDEzLjU3NGwuMTA1LjI0OGgyNS40%0D%0ANTZ2LTguMDczYy0uMDAxIDAtNi42NDktMTUuNjctMjguNDkyLTE1LjY3em0wLTcuNjJjOC4wNzMg%0D%0AMCAxNC4yNDYtNi4xNzQgMTQuMjQ2LTE0LjI0NnMtNi4xNzMtMTQuMjQ2LTE0LjI0Ni0xNC4yNDYt%0D%0AMTQuMjQ2IDYuMTczLTE0LjI0NiAxNC4yNDYgNi4xNzMgMTQuMjQ2IDE0LjI0NiAxNC4yNDZ6bS00%0D%0ANC4wOTMgMy4yMWEyMy4yMSAyMy4yMSAwIDAgMCA0LjQ2NC0uNDI4Yy43MTctLjE0IDEuNDE5LS4z%0D%0AMTUgMi4xMDYtLjUyMSAxLjAzLS4zMDkgMi4wMjMtLjY5IDIuOTc2LTEuMTM4YTIxLjA5OSAyMS4w%0D%0AOTkgMCAwIDAgMy41NzQtMi4xMzMgMjAuODcyIDIwLjg3MiAwIDAgMCA1LjUxNS02LjA5MSAyMS4y%0D%0AODMgMjEuMjgzIDAgMCAwIDIuMTIxLTQuODIzIDIyLjE2IDIyLjE2IDAgMCAwIC43MDYtMy4xOTNj%0D%0ALjE2LTEuMDk3LjI0Mi0yLjIyNC4yNDItMy4zNzdzLS4wODMtMi4yODEtLjI0Mi0zLjM3N2EyMi43%0D%0ANzggMjIuNzc4IDAgMCAwLS43MDYtMy4xOTMgMjEuMjgzIDIxLjI4MyAwIDAgMC0zLjI3Mi02LjU1%0D%0AIDIwLjg0OCAyMC44NDggMCAwIDAtNC4zNjQtNC4zNjQgMjEuMDk5IDIxLjA5OSAwIDAgMC0zLjU3%0D%0ANC0yLjEzMyAyMS40ODggMjEuNDg4IDAgMCAwLTIuOTc2LTEuMTM4IDIyLjMzIDIyLjMzIDAgMCAw%0D%0ALTIuMTA2LS41MjEgMjMuMjAyIDIzLjIwMiAwIDAgMC00LjQ2NC0uNDI4Yy0xMi4yOTkgMC0yMS43%0D%0AMDUgOS40MDUtMjEuNzA1IDIxLjcwNCAwIDEyLjI5OSA5LjQwNiAyMS43MDQgMjEuNzA1IDIxLjcw%0D%0ANHpNMTQ1LjYyOSAxMzFhMzYuNzM5IDM2LjczOSAwIDAgMC0xLjItMS43MTggMzkuODA0IDM5Ljgw%0D%0ANCAwIDAgMC0zLjM2Ny0zLjk2NyA0MS40ODEgNDEuNDgxIDAgMCAwLTMuNDQyLTMuMTc5IDQyLjA3%0D%0AOCA0Mi4wNzggMCAwIDAtNS45MzEtNC4wODMgNDMuNzI1IDQzLjcyNSAwIDAgMC0zLjQ3Ni0xLjc3%0D%0ANmMtLjAzNi0uMDE2LS4wNjktLjAzNC0uMTA0LS4wNS01LjY5Mi0yLjU4MS0xMi44NDktNC4zNzYt%0D%0AMjEuNzQ2LTQuMzc2LTguODk4IDAtMTYuMDU1IDEuNzk1LTIxLjc0NiA0LjM3Ni0uMTk2LjA4OS0u%0D%0AMzc5LjE4NS0uNTcyLjI3NmE0My4zMTYgNDMuMzE2IDAgMCAwLTMuNjIgMS45MTcgNDIuMzIgNDIu%0D%0AMzIgMCAwIDAtNS4zMTggMy43MTYgNDEuNTAxIDQxLjUwMSAwIDAgMC0zLjQ0MyAzLjE3OSA0MC42%0D%0AMzIgNDAuNjMyIDAgMCAwLTMuMzY2IDMuOTY3Yy0uNDUyLjYxLS44NTEgMS4xODYtMS4yIDEuNzE4%0D%0ALS4zMjQuNDkzLS42Ljk0My0uODQxIDEuMzUxbC0uMDYxLjEwMWEyNy45NiAyNy45NiAwIDAgMC0u%0D%0ANjIyIDEuMTE5Yy0uMzI1LjYyMS0uNDc1Ljk3NS0uNDc1Ljk3NXYxMS42OTJoODIuNTN2LTExLjY5%0D%0AMnMtLjM2LS44NDItMS4xNTgtMi4xOTVhMzUuNDE3IDM1LjQxNyAwIDAgMC0uODQyLTEuMzUxeiIv%0D%0APg0KPC9zdmc+")

@var color usrc1                'User color 1' #6f5c8a
@var color usrc2                'User color 2' #476845
@var color usrc3                'User color 3' #817356
@var color usrc4                'User color 4' #4e6274
@var color usrc5                'User color 5' #815956
@var color usrc6                'User color 6' #7d5464
@var color usrc7                'User color 7' #4e6974
@var color usrc8                'User color 8' #745e4e

@var color usrbgc1              'User bg color 1' #9978a5
@var color usrbgc2              'User bg color 2' #6e9362
@var color usrbgc3              'User bg color 3' #9d926c
@var color usrbgc4              'User bg color 4' #668399
@var color usrbgc5              'User bg color 5' #906060
@var color usrbgc6              'User bg color 6' #a37584
@var color usrbgc7              'User bg color 7' #669799
@var color usrbgc8              'User bg color 8' #9d806c


==/UserStyle== */
@-moz-document domain("web.telegram.org") {
    :root {
        --test-color: #292f3880;
        
        --control-t-hover: rgba(control-hover, .5);
        --control-t-active: rgba(control-active, .5);
        
        --accent-t: rgba(accent, .3);
        
        --bgblur: bgblur;
        
        --chatbg: chatbg;
        --chatbg-o : chatbg-o;
        --chatbg-i : chatbg-i;
        
        --tail-v: (tail is 1 ? visible : hidden);
        --vignette: (vign is 1 ? visible : hidden);
        --emo-left: (emoj-shift is 1 ? -263px : -133px);
        --emo-t-left: (emoj-shift is 1 ? initial : 50%);
        --emo-t-right: (emoj-shift is 1 ? -1px : initial);
        
        --private: (private is 1 ? 10px : 0);     
        
        --version: "Dark-Telegram v1.0.0 â€” March 29th, 2020";
        --message: "An update is available, please report any issues on GitHub so that we can fix them.";
        --link: "<LINK-TO-PROJECT-PAGE>";
        --disclaimer: "Ported from: https://github.com/vednoc/dark-whatsapp";
    }
    
    i = !important;
    
    t-in = .1s;
    t-out = 1s;
    
    msgb-thumb = msgb - 5;
        
    accent-alt = accent + 33%;
    
    /* default colors */
    .user_color_1,.user_color_1:hover{color: usrc1 i}
    .user_color_2,.user_color_2:hover{color: usrc2 i}
    .user_color_3,.user_color_3:hover{color: usrc3 i}
    .user_color_4,.user_color_4:hover{color: usrc4 i}
    .user_color_5,.user_color_5:hover{color: usrc5 i}
    .user_color_6,.user_color_6:hover{color: usrc6 i}
    .user_color_7,.user_color_7:hover{color: usrc7 i}
    .user_color_8,.user_color_8:hover{color: usrc8 i}
    .user_bgcolor_1{background: usrbgc1 i}
    .user_bgcolor_2{background: usrbgc2 i}
    .user_bgcolor_3{background: usrbgc3 i}
    .user_bgcolor_4{background: usrbgc4 i}
    .user_bgcolor_5{background: usrbgc5 i}
    .user_bgcolor_6{background: usrbgc6 i}
    .user_bgcolor_7{background: usrbgc7 i}
    .user_bgcolor_8{background: usrbgc8 i}
        
        
    /* contact icon initials */
    if(hideinitials is 1){
        .peer_initials{
            color: transparent;
        }
    }
    
    /* contact icon */
    if(useicons is 1){
        .im_dialog_photo,
        .im_message_contact_photo,
        .im_message_from_photo,
        .im_message_fwd_photo,
        .md_modal_list_peer_photo,
        .peer_modal_photo{
            background-color: transparent i;
            background-image: contacticon;
            background-size: cover;
        }
    }
        
    /* Blurry mode for contacts and photos */
    .im_dialog_wrap.active,
    .im_dialog_wrap,
    .tg_head_peer_info,
    .im_content_message_wrap,
    .composer_rich_textarea{
        filter: blur(var(--private));
        transition: t-out;
    }
    
    /* disable blur on mouse hover */
    .im_dialog_wrap.active:hover,
    .im_dialog_wrap:hover,
    .tg_head_peer_info:hover,
    .im_content_message_wrap:hover,
    .composer_rich_textarea:hover{
        filter: blur(0);
        transition: t-in;
    }

    .im_dialog_wrap,
    .im_dialogs_panel{
        border-bottom: 1px solid border;
    }
    
    /* Widescreen */
    .im_send_form,
    .im_send_panel_wrap,
    .im_message_wrap {
        max-width: 1000px;
    }

    .im_send_panel_wrap {
        background: control i;
        padding-bottom: 10px;
    }
    
    a.composer_emoji_btn:hover{
        background-color: control-active;
    }
    
    .tg_head_split{
        margin-top: 10px;
        height: 49px;
        border: 1px solid border i;
    }
        
    .im_page_wrap,
    .tg_head_split {
        max-width: 1396px;
        box-shadow: 0px 0px 10px shadow;
    }
    
    /* mention dropdown */
    .composer_dropdown_wrap{
        background-color: control;
        border: 1px solid border;
        border-radius: 2px;
    }
    
    .composer_dropdown_wrap>div>div>div>div>div>div>ul>li>a:hover{
        background-color: control-hover i;
    }
    
    /* chat background */
    .im_history_wrap{
        background-color: bgcolor;
        if(showchatbg and chatbg-o > 0){
            &:before{
                content: '';
                position: absolute;
                top: 0; left: 0; bottom: 0; right: 0;
                background-image: (showchatbg ? chatbg : none);
                filter: invert(chatbg-i) opacity(chatbg-o);
            }
        }
    }
    
    .im_history_scrollable_wrap .im_history_scrollable{
        // background-color: bgcolor;
        // filter: invert(chatbg-i) opacity(chatbg-o);
    }
    
    /* chat bubbles */
    .im_message_text {
        border: 1px border;
        padding: 10px;
        border-radius: 0px 10px 10px 10px;
    }
    
    /* user photo */
    .im_dialog_photo,
    .md_modal_list_peer_photo,
    .im_message_contact_photo, .im_message_from_photo, .im_message_fwd_photo{
        border-radius: round;
    }
    
    /* own user photo in chat history */
    .im_message_out a.im_message_from_photo{        
        visibility: hidden;
        width: 0;
        min-width: 0;
        margin: 0;
    }
    
    .im_message_contact_photo, .im_message_from_photo, .im_message_fwd_photo{
        min-width: 42px;
    }
        
    /* short message bubble */
    .im_grouped_short .im_message_outer_wrap .im_message_out .im_message_body,
    .im_grouped_short .im_message_outer_wrap .im_message_in .im_message_body{
        border-radius: msgb;
    }
        
    /* message bubble base */
    .im_message_body{
        background-color: msg-in-bg;
        border-radius: msgb;
        padding: 0px 3px 3px 3px;
        border: 1px solid border;
        box-shadow: 0px 3px 5px shadow;
    }
    
    /* messages bubble tail*/
    .im_message_body:before{
        content: '';
        position: absolute;
        top: 0px;  
        height: 0;
        width: 0;
        border-top: 15px solid border;
        visibility: var(--tail-v);
    }
    
    /* in tail */
    .im_message_in .im_message_body:before{
        /*left: 79px;*/
        left: 47px;
        border-left: 10px solid transparent;
    }
    
    /* out tail */
    .im_message_out .im_message_body:before{
        /*right: 37px;*/
        right: 5px;
        border-right: 10px solid transparent;
    }
    
    /* hide tails in short messages */
    .im_grouped_short .im_message_outer_wrap .im_message_out .im_message_body:before,
    .im_grouped_short .im_message_outer_wrap .im_message_in .im_message_body:before{
        display: none;
        visibility: hidden;
    }
    
    /* out message bubble */
    .im_message_out .im_message_body{
        background-color: msg-out-bg;
        border-top-right-radius: 1px;
        margin-left: 10px;
        margin-right: 15px;
    }
    
    /* in message bubble */
    .im_message_in .im_message_body{
        border-top-left-radius: 1px;
    }
    
    /* photo messages */
    .im_message_photo_thumb,
    .im_message_video_thumb{
        border-radius: msgb-thumb i;
    }
    
    /* photo messages vignette */
    .im_message_video_thumb,
    .im_message_photo_thumb::before{
        content: '';
        position: absolute;
        width: inherit;
        height: 100%;
        opacity: 1;
        box-shadow: inset 0px 0px 50px black;
        transition: t-out;
        visibility: var(--vignette);
    }
    
    /* fade out vignette when mouse hover */
    .im_message_video_thumb,
    .im_message_photo_thumb:hover::before{
        opacity: .75;
        transition: t-in;
    }
    
    /* fix the vignette in the right place */
    .im_message_video_thumb,
    a.im_message_photo_thumb{
        position: relative;
    }
    
    .im_message_author{
        padding: 0px 5px 0px 5px;
        margin: 0;
    }
    
    .im_message_out .im_message_body .im_message_author_wrap .im_message_author{        
        text-align: end;
        width: 100%;
    }
        
    .im_message_in .im_message_body .im_message_author_wrap .im_message_author{        
        text-align: start;
        width: 100%;
    }
        
    /* right user profile photo in text area */
    a.pull-right,
    #notify_sound {
        display: none;
        margin: 0;
        padding: 0;
        width: 0;
        height: 0;
    }
    
    /* accent color pulsing animation */
    @keyframes pulse{
        0%{color: accent;}
        25%{color: accent-alt;}
        100%{color: accent;}
    }
        
    /* welcome message panel */
    .im_history_not_selected{
        margin: auto;
        width: 70%;
        color: accent;
        animation: pulse ((t-out + t-in) * 2) ease-in-out infinite;
        /* show custom message */
        &:before{
            display: block;
            content: var(--message) " \A " var(--link) " \A";
            white-space: pre-wrap;
            border-bottom: 1px solid border;
            font-size: 16px;
            margin-bottom: 16px
            padding: 16px 20%;
            color: text;
            user-select: auto i;
        }
        /* version footer */
        &:after{
            display: block;
            content: var(--disclaimer) '\A' var(--version);
            white-space: pre-wrap;
            border-top: 1px solid border;
            font-size: 11px;
            margin-top: 16px;
            padding-top: 16px;
            color: text - 50%;
            user-select: auto i;
        }
    }
    
    /* user is typing */
    .im_history_typing{
        margin: auto;
        display: table;
        text-align: center;
        background: control;
        border: 1px solid border;
        border-radius: 7px;
        margin-bottom: 15px;
        padding: 3px 10px;
    }
    
    html,
    .modal-content{        
        background-color: bgcolor i;
    }
    
    body{
        /* background-color: bgcolor i;*/
        color: text i;
        &:before{
            if(app_image == default and bgopacity != null and bgopacity > .01){
                content: '';
                s = calc(-2px * var(--bgblur));
                b = blur(bgblur);
                o = opacity(bgopacity);
                i = invert(bginvert);
                h = hue-rotate(bghue);
                left: s; top: s; bottom: s; right: s;
                width: 100%; height: 100%;
                filter: b o i h;
                background-image: bgimage;
                background-size: cover;
                position: absolute;
                z-index: -1;
            } else {
                display: none;
            }
        }
    }
    
    a.tg_checkbox{
        color: text i;
    }

    .im_page_wrap {
        /*background color of contentwrapper under header*/
        background-color: control i;
        border-top: 0px none i;
        border-left: 1px solid border i;
        border-right: 1px solid border i;
        border-bottom: 1px solid border i;
        box-shadow: 0px 3px 5px shadow;
    }

    /* nickname unselected */
    .im_dialog_peer {
        color: text i;      
    }

    /*nicknames in contactlist via hamburger menu*/
    .contacts_modal_members_list a.contacts_modal_contact {
        color: text;
    }

    .im_dialogs_scrollable_wrap a.im_dialog_searchpeer{
        transition: t-out;
    }
    
    .contacts_modal_members_list .active a.contacts_modal_contact,
    .im_dialogs_scrollable_wrap a.im_dialog_searchpeer:hover,
    .im_dialogs_scrollable_wrap a.im_dialog_searchpeer_selected,
    .active a.im_dialog {
        /*selected peer */
        background-color: control-active i;
        transition: t-in;
    }
    
    /* top bar */
    .tg_head_split,
    .md_modal_head {
        /*page header block*/
        background-color: control i;
        border-radius: border-size border-size 0px 0px;
    }

    /* outer body */
    .im_page_wrap{
        border-radius: 0 0 border-size border-size;
    }
    
    .dropdown.open .tg_head_btn,
    .tg_head_btn:hover,
    .im_bottom_panel_wrap {
        background: control i;
    }
    
    .tg_head_btn{  
        height: 47px;
        top: 0;
        transition: t-out;
    }
    
    .tg_head_btn:hover{
        height: 46px;
        top: 0;
        transition: t-in;
    }
    
    .tg_head_logo_wrap, .tg_head_logo_wrap:hover{
        border-right: 1px solid border;
    }
    
    /* search box */
    .form-control,
    .form-control:focus,
    .im_dialogs_modal_col_wrap .im_dialogs_search_field{
        background-color: inputbg;
        border-radius: border-size;
        color: #fff i;
        border-color: border i;
    }

    .im_dialogs_col_wrap {
        /*contactlist right border*/
        border-right: 1px solid border;
        border-top: 0px none i;
        padding-bottom: initial;
        height: auto;
    }

    /* buttons */
    .btn,
    .im_edit_cancel_link,
    .im_submit,
    .btn:focus,
    .im_edit_cancel_link:focus,
    .im_submit:focus{
        background-color: btn-bg;
        padding: 5px 15px;
        margin: 0px;
        height: auto;
        width: auto;
        border: 1px solid border;
        border-bottom: 3px solid border;
        border-radius: 5px;
        box-shadow: 0px 2px 5px shadow;       
        transition: t-out;
        color: accent;
    }

    /* buttons hover */
    .btn:hover,
    .im_edit_cancel_link:hover,
    .im_submit:hover {
        background-color: btn-bg-h i;
        box-shadow: 0px 2px 5px shadow;
        border: 1px solid border;
        border-bottom: 3px solid border;
        transition: t-in;
        color: accent-alt;
    }
        
    /* round button */
    .im_record_bg,
    .im_message_file_button,
    .md_modal_split_action{
        background-color: btn-bg;
        border: 1px solid border;
        box-shadow: 0px 2px 5px shadow;          
        transition: t-out;
        color: accent;
        &:hover{
            background-color: btn-bg-h i;
            box-shadow: 0px 2px 5px shadow;
            border: 1px solid border;
            transition: t-in;  
            color: accent-alt;          
        }
    }
    
    /* counter on buttons and current session text */
    .im_selected_count,
    .session_active_date_online{
        color: accent-alt;
    }
    
    .btn.btn-link.dropdown-toggle{
        padding: 3px 8px;        
        
    }
    
    .im_message_mymention {
        background: control;
    }

    .im_message_focus .im_message_outer_wrap {
        background-color: control;
    }

    .im_message_selected .im_message_outer_wrap {
        background: var(--control-t-hover);
    }

    a.im_dialog:hover, .dropdown-menu a:hover{
        background-color: control-hover i;
        // transition: t-in;
    }
    
    /* current conversation marker in contact list */
    .im_dialog_wrap.active{
        padding-left: 4px;
        transition: t-out;
        &:before{
            content: '';
            width: 4px;
            transition: t-in;
            position: absolute;
            background-color: accent-alt;
            left: 0; top: 0; bottom: 0; right: 0;
        }
    }
    
    if(shift-anim == 1){
        /* contact list shift animation */
        .im_dialog_wrap a.im_dialog{
            transition: padding-left t-in ease-in;
            &:hover{
                transition: padding-left t-in ease-out;
                padding-left: 24px;
            }
        }
    }
    
    /* unread banner text */
    .im_message_unread_split{
        margin-bottom: 25px;
        line-height: 30px;
        position: relative;
        z-index: 1;
    }

    /* unread banner background */
    .im_message_unread_split::before {
        visibility: visible;
        content: '';
        background-color: control i;
        border-top: 1px solid border;
        border-bottom: 1px solid border;
        position: absolute;
        min-width: 100px i;
        width: 100%;
        height: 40px;
        left: 0;
        right: 0;
        margin-top: -5px;
        z-index: -2;
    }

    /* unread banner text bacground */
    .im_message_unread_split::after {
        visibility: visible;
        content: '';
        background-color: control-active i;
        border-radius: 50px;
        position: absolute;
        vertical-align: middle;
        text-align: center;
        min-width: 100px i;
        width: 140px;
        height: 30px;
        line-height: 30px;
        margin-top: 0px;
        margin-left: -70px;
        left: 50%;
        z-index: -1;
    }

    @keyframes im_message_focus_fade {
        0% {
            /* soft transition */
            background-color: control-hover;
        }
    }

    .im_history_select_active .im_message_outer_wrap:hover {
        background: var(--control-t-active);
        // transition: t-in;
    }

    .im_dialog_chat_from_wrap,
    .im_dialog_message_service {
        color: red;
    }
    
    .im_bottom_panel_wrap{
        border-top: 1px solid border;
    }
    
    /* status dot in message history area */
    .im_message_out>.icon-message-status{
        background: accent;
        margin-left: 5px;        
    }
    .im_dialog_unread,
    .active .im_dialog_unread{
        background: accent;        
        background-color: accent;
    }
    
    /* message selected icon */
    .icon-select-tick{
        visibility: hidden;
    }
    
    /* bottom area container */
    .im_send_form {
        /* position: absolute; */
        top: 0; left: 40px; bottom: 0; right: -40px;
        position: relative;        
        margin-right: 50px;
        display: grid;
        grid-template-columns: 1fr 190px;
        grid-column-gap: 10px;
    }
    
    /* bottom area edit panel (for edit message, replying etc..) */
    .im_edit_panel_wrap{
        padding: 0 0 16px;
        margin: 15.5px 16px 0 16px;
    }
    
    .im_edit_panel_border{
        border-bottom: 1px solid border;
        display: none;
    }
    
    /* hiding useless emoji's below textarea */
    .composer_emoji_panel{
        display: none;
    }
    
    /* text message area */
    .im_send_field_wrap {
        border-radius: border-size;
        min-height: 32px;
        height: auto;
        grid-row: 2;
        grid-column: 1;
        margin: unset;
        padding-bottom: unset;
    }
    
    /* bottom area buttons */
    .im_send_buttons_wrap{
        // visibility: hidden;
        display: table;
        grid-row: 2;
        grid-column: 2;
    }
    
    /* chosen reply message position */
    .im_send_reply_wrap{
        grid-row: 1;
        grid-column: 1 / span 2;
    }
    
    /* chosen reply message close button position */
    .im_send_reply_cancel{
        // margin: 0px 0 0px 16px;
        left: 15px;
        bottom: -25%;
        position: relative;
    }
    
    /* pinned message close button position */
    .im_history_pinned_hide{
        margin-right: 16px;
        margin-top: 20px;
    }
    
    /* message textbox */
    .composer_rich_textarea,
    .composer_textarea {
        box-shadow: 0px 1px 1px control;
        background: inputbg i;
        padding: 9px 30px 12px 12px i;
        width: auto i;
        height: auto i;
        min-height: unset;
        left: 0 i;
        font-size: 15px;
        border: 1px solid border;
        border-radius: border-size i;
        word-wrap: break-word;
        max-width: 680px;
    }
    
    /* message textbox when focused */
    .composer_rich_textarea:focus {
        box-shadow: 0px 1px 1px accent i;
        border: 1px solid border;
        border-radius: border-size i;
    }
    
    /* own user profile photo in text area */
    a.im_panel_own_photo{
        display: none;
        visibility: hidden;
        width: 0;
        height: 0;
        margin: 0;
        padding: 0;
    }

    /* margin media buttons */
    .im_attach{margin-top: 14px i;}
    .im_attach, .im_media_attach{margin: 13px 6px;}
    .im_record_supported .im_record{margin: 5px 18px;}
    .im_submit_send{margin-top: 5px;}
    
    /* making emoji button visible outside textarea */
    .im_send_field_wrap,
    .im_inline_placeholder_wrap{overflow: unset;}
        
    /* emoji button */
    .composer_emoji_insert_btn{
        position: absolute;
        left: -39px;
        top: 8px;
        cursor: pointer;
        margin-top: 1px;
        display: block;
    }
    
    /* pinned message are */
    .im_history_pinned_wrap{
        border-bottom: 1px solid border;
    }
    
    .btn-primary {
        background-color: btn-bg;
    }

    .btn-primary:hover {
        background-color: control-hover;
        transition: t-in;
    }

    .btn-primary.disabled,
    .btn-primary[disabled] {
        background: btn-bg none repeat scroll 0% 0%;
    }

    /*emoji*/
    .composer_emoji_tooltip,
    .icon-tooltip-tail,
    .dropdown-menu {
        background-color: control i;
        border-color: border i;
        border-radius: 3px i;
        box-shadow: 0px 0px 5px shadow;
    }
    
    /* views eye */
    .im_message_views{
        left: 4px;
        top: 25px;
        right: 0;
        display: inline-block;
        position: relative;
        white-space: nowrap;
        line-height: normal;
        text-align: left;
        background: control;
        border: 1px solid border;
        border-radius: 7px;
        padding: 3px 5px;
        opacity: .5;
    }
    
    
    .im_service_message_wrap {
        text-align: center;
    }
    
    .divider{
        background-color: border i;
    }
    
    .contacts_modal_contact:hover{
        background: control-hover i;
        transition: t-in;
    }
    
    /* pinned and history date message */
    .im_service_message_wrap .im_service_message
    {
        background-color: control;
        padding: 6px;
        border: 1px solid border;
        border-bottom: 3px solid border;
        border-radius: 5px;
        box-shadow: 0px 2px 5px shadow;
        margin: 5px;
        display: inline-block;
        float: center;
    }
    
    /* message time */
    .im_message_date{
        /*color: rgba(173, 173, 173, .25);*/
        opacity: .5;
        background: control;
        border: 1px solid border;
        border-radius: 7px;
        margin: 0px 4px;
    }
    
    .im_message_date, .im_message_fwd_date{
        padding: 1px 4px;
    }
    
    /*.im_message_meta, .historyMessage, .im_message_out{
    }*/
    
    .im_message_meta{        
        order: 2;
        height: 100%;
        &:before{
            content: "\A";
            white-space: pre;
        }
        &:after{
            content: "\A";
            white-space: pre;
        }
        
    }
    
    /*.im_content_message_wrap{                
    }*/
    
    .im_grouped_short .im_content_message_wrap,
    .im_content_message_wrap{         
        /* display: flex;        */
        margin: 2px 16px;
    }
    
    .im_message_meta,
    .historyMessage,
    .im_message_out{
         display: flex;
    }
    
    .im_message_out{
         float: right;
         flex-direction: row-reverse;
         /* background: #ff000030;*/
    }
    
    .im_message_in{
        float: left;
        flex-direction: row;
        /* background: #ff000036;*/
    }
    
    .historyMessage{
       flex-wrap: wrap;
       order: 1;
    }
    
    /* right scrollbar */
    .im_history_col .nano > .nano-pane,
    .contacts_modal_col .nano > .nano-pane,
    .sessions_modal_col .nano > .nano-pane,
    .stickerset_modal_col .nano > .nano-pane, 
    .im_dialogs_modal_col .nano > .nano-pane,
    .composer_rich_textarea,
    .composer_textarea,
    ::-webkit-scrollbar {
        right: 0;
        top: 0;
        bottom: 0;
        border-radius: 0;
        width: 6px;
        background: #0003;
    }
    
    /* right scrollbar knob */
    .im_history_col .nano > .nano-pane > .nano-slider,
    .contacts_modal_col .nano > .nano-pane > .nano-slider,
    .sessions_modal_col .nano > .nano-pane > .nano-slider,
    .stickerset_modal_col .nano > .nano-pane > .nano-slider,
    .im_dialogs_modal_col .nano > .nano-pane > .nano-slider
    .composer_rich_textarea,
    .composer_textarea,
    ::-webkit-scrollbar-thumb{ 
        border-radius: 0;
        background: accent;
    }
    
    /*scrollbarbutton when hover*/
    .im_dialogs_col .nano > .nano-pane > .nano-slider,
    ::-webkit-scrollbar-thumb:hover {
       background: accent-alt;
    }
    
    /* contacts scrollbar area */    
    .im_dialogs_col{
        margin-right: 0;
        bottom: 0;
    }
    
    /* contacts scrollbar bg */
    .im_dialogs_col .nano > .nano-pane{
        background: #0003;
        width: 4px;
    }
    
    /* contacts scrollbar */
    .im_dialogs_col .nano > .nano-pane > .nano-slider{
        background-color: accent i;
        width: 5px;
        left: -5px;
    }
    
    /* accent colors */
    .im_message_author, .im_message_fwd_author,
    a, a:focus, a:hover,
    .tg_head_btn,
    .composer_emoji_tooltip_tab_emoji,
    .composer_emoji_tooltip_tabs_stickers_active .composer_emoji_tooltip_tab_stickers,
    .im_message_document_name,
    .btn-link, .btn-link:hover,
    .im_message_reply_author,
    .im_message_unread_split,
    .peer_modal_profile_description,
    .tg_head_peer_dropdown .dropdown-menu > li > a,
    a.im_dialog .im_dialog_chat_from_wrap, 
    a.im_dialog .im_short_message_media, 
    a.im_dialog .im_short_message_service,
    .tg_head_logo_dropdown .dropdown-menu > li > a,
    .md_modal_list_peer_description .status_online,
    .md_modal_list_peer_description.status_online{
        color: accent;
        // transition: t-in;
    }
    
    /* emoji/stickers tab */
    .composer_emoji_tooltip_tab_shadow{
        background: accent-alt;
        box-shadow: 0 1px 0 0 accent-alt;
    }
    
    /* emoji popup position */
    .composer_emoji_tooltip{
        margin-left: var(--emo-left);
    }
    
    /* emoji popup tail position */
    .composer_emoji_tooltip_tail{
        left: var(--emo-t-left);
        right: var(--emo-t-right);
    }
    
    /* sticker button background */
    .composer_sticker_btn:hover,
    .stickerset_modal_sticker_wrap:hover{
        background: control-hover;
    }
    
    /* message content when hover in left contact list */
    .contacts_modal_contact_wrap:hover .contacts_modal_contact .md_modal_list_peer_description,
    a.im_dialog:hover .im_short_message_text{
        color: accent-alt;
    }
    
    /* date when hover in left contact list */
    a.im_dialog:hover .im_dialog_date{
        color: accent;
    }
    
    a.im_dialog:hover .im_dialog_meta .im_dialog_unread,
    a.im_dialog:hover .im_dialog_meta .active .im_dialog_unread{
        background-color: accent-alt;
    }
    
    .md_modal_iconed_section_wrap{
        border-bottom: 1px solid border;
    }
    
    /* left border in pinned and reply messages */
    .im_message_reply_border{
        // background: accent-alt;
        // height: 36px;
        display: none;
    }
    
    /* removing extra padding from reply message */
    .im_message_reply{
        padding-left: unset;
    }
    
    /* replay and pinned messages */
    .im_message_reply_wrap,
    .im_history_pinned_wrap .im_message_reply{
        background-color: #0003;
        border-radius: 0 2px 2px 0;
        padding: 8px 16px;
        border: 1px solid border;
        position: relative;
        &:before{
            content: '';
            width: 5px;
            background-color: accent-alt;
            border-radius: border-size 0 0 border-size;
            position: absolute;
            left: 0; top: 0; right: 0; bottom: 0;
        }
    }
    
    /* reply messages border radius */
    .im_message_reply_wrap{
        border-radius: msgb-thumb;
    }
        
    /* pinned messages border-radius */
    .im_history_pinned_wrap .im_message_reply{
        border-radius: border-size;
    }
    
    /* removing the bottom margin from thumbed reply messages */
    .im_message_reply_wrap .im_message_reply_thumbed{
        margin-bottom: unset;
    }
    
    /* thumbed reply messages content fix */
    .im_message_reply_thumb_wrap{
        display: inline;
        width: inherit;
        position: relative;
        margin-right: 12px;
    }
    
    /* thumbed reply messages thumb fix */
    .im_message_reply_thumbed .im_message_reply_author,
    .im_message_reply_thumbed .im_message_reply_body{
        display: block;
        position: relative;
        margin-left: unset;
    }
    
    /* shared link background */
    .im_message_webpage_wrap{
        border-radius: 0 msgb-thumb msgb-thumb 0;
        border-color: accent-alt;
        background-color: #0000000d;        
    }
    
    /* model divider */
    .md_modal_section_splitter{
        background: control;        
        box-shadow: none;
        border-top: none;
    }
    
    /* group info edit input */
    .md-input{
        background: inputbg;
        color: text;
    }
    .md-input-group{
        border-bottom: 1px solid control;
    }
    .md-input-focused{
        border-bottom: 1px solid accent;
    }
    
    /* headers */
    h1, h2, h3, h4, h5,
    .composer_stickerset_title,
    .composer_stickerset_title:hover{
        color: text;
    }
    
    /* toggles ON */
    .tg_checkbox.tg_checkbox_on i.icon-checkbox-inner{
        background: accent;
    }
    
    /* toggles OFF */
    .tg_checkbox i.icon-checkbox-inner{
        background: control;
        box-shadow: none;
        border: 1px solid border;
    }
    
    /* toggles bg ON */
    .tg_checkbox.tg_checkbox_on span.icon-checkbox-outer, {
        background: accent-alt;
        opacity: 1;
        transition: t-in;
    }
    
    /* toggles bg OFF */
    .tg_checkbox span.icon-checkbox-outer{
        background: accent-alt;
        opacity: .75;
        transition: t-out;
    }
    
    /* lang drop down */
    .dropdown-menu>li>a,
    .dropdown-menu>li>a:focus,
    .dropdown-menu>li>a:hover{
        color: text;
    }
    
    /* slider thumb */
    .tg_slider_thumb{
        background: accent;
    }
    /* slider track */
    .tg_slider_track{
        background: border;
    }
    /* slider track filled */
    .tg_slider_track_fill{
        background: accent-alt;
    }
    
    /* radio button */
    a.tg_radio{    
        color: text;
    }
    
    i.icon-radio{
        background-color: control;
        border: 3px solid border;
    }
    
    /* radio button outer */
    .tg_radio .icon-radio-outer{
        border: 2px solid control;
    }
    
    .tg_radio.tg_radio_on .icon-radio-outer{
        border-color: accent;
    }
    
    /* radio button inner */
    .tg_radio.tg_radio_on i.icon-radio,
    a.tg_radio_on i.icon-radio,
    .tg_radio.tg_radio_on .icon-radio-outer{
        background-color: accent;
    }
    
    /* radio button hover */
    a.tg_radio:hover i.icon-radio,
    a.tg_radio_on:hover i.icon-radio{
        background-color: accent-alt;
    }
    
    /* media track fill */
    .audio_player_seek_slider .tg_slider_track_fill,
    /* progress bar fill */
    .tg_down_progress .progress-bar, .tg_up_progress .progress-bar,
    /* volume knob */
    .audio_player_volume_slider .tg_slider_thumb,
    .audio_player_volume_slider .tg_slider_track_fill{
        background: accent;
    }
    
    /* volume slider track */
    .audio_player_volume_slider .tg_slider_track,
    /* media slider track */
    .audio_player_seek_slider .tg_slider_track{
        background: var(--accent-t);
    }
    
    /* unread badge */
    .im_dialog_badge{
        background: accent;
    }
    
    /* unread badge active */
    .active .im_dialog_badge{
        background-color: accent-alt;
        color: text;
    }
    
    /* unread badge muted */
    .im_dialog_badge_muted{
        background: var(--accent-t);
    }
    
    /* media player panel */
    .media_modal_bottom_panel_wrap{
        background-color: control;
    }
}